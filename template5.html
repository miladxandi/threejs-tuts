<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three.js - Ø³ÛŒØ³ØªÙ… Ù¾Ø§Ø±ØªÛŒÚ©Ù„</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: "Vazirmatn", sans-serif; overflow-x: hidden; background: #000; }
        #info {
            position: absolute; top: 20px; left: 50%; transform: translateX(-50%);
            color: #fff; background: linear-gradient(135deg, rgba(165, 94, 234, 0.85), rgba(95, 39, 205, 0.85));
            backdrop-filter: blur(10px); padding: 15px 30px; border-radius: 20px;
            font-size: 16px; z-index: 100; box-shadow: 0 8px 32px rgba(165, 94, 234, 0.4);
        }

        .tutorial-toggle {
            position: fixed; top: 20px; right: 20px; z-index: 1001;
            background: linear-gradient(135deg, rgba(165, 94, 234, 0.9), rgba(95, 39, 205, 0.9));
            color: #fff; border: none; padding: 12px 20px; border-radius: 12px;
            cursor: pointer; font-family: inherit; font-size: 14px; font-weight: 600;
            backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); transition: all 0.3s;
        }
        .tutorial-toggle:hover { transform: scale(1.05); }

        .tutorial-panel {
            position: fixed; top: 0; right: -420px; width: 400px; height: 100vh;
            background: rgba(15, 15, 25, 0.95); backdrop-filter: blur(20px);
            border-left: 1px solid rgba(255,255,255,0.1); z-index: 1000;
            transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto; padding: 80px 25px 25px;
        }
        .tutorial-panel.open { right: 0; }
        .tutorial-panel::-webkit-scrollbar { width: 6px; }
        .tutorial-panel::-webkit-scrollbar-thumb { background: rgba(165, 94, 234, 0.5); border-radius: 3px; }

        .tutorial-section { margin-bottom: 25px; padding: 20px; background: rgba(255,255,255,0.03); border-radius: 16px; border: 1px solid rgba(255,255,255,0.06); }
        .tutorial-section h3 { color: #a855f7; font-size: 16px; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
        .tutorial-section p { color: rgba(255,255,255,0.8); font-size: 14px; line-height: 1.8; margin-bottom: 12px; }
        .tutorial-section ul { color: rgba(255,255,255,0.7); font-size: 13px; line-height: 2; padding-right: 20px; }
        .code-block { background: rgba(0,0,0,0.4); border-radius: 10px; padding: 15px; margin: 12px 0; overflow-x: auto; border: 1px solid rgba(255,255,255,0.08); }
        .code-block code { color: #a5d6ff; font-family: 'Courier New', monospace; font-size: 12px; line-height: 1.6; direction: ltr; text-align: left; display: block; white-space: pre; }
        .code-block .comment { color: #6a9955; }
        .code-block .keyword { color: #c586c0; }
        .code-block .function { color: #dcdcaa; }
        .code-block .number { color: #b5cea8; }
        .tip-box { background: linear-gradient(135deg, rgba(165, 94, 234, 0.15), rgba(95, 39, 205, 0.1)); border: 1px solid rgba(165, 94, 234, 0.3); border-radius: 10px; padding: 12px 15px; margin: 12px 0; }
        .tip-box p { color: #c4b5fd; font-size: 13px; margin: 0; }
        .nav-buttons { display: flex; gap: 10px; margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1); }
        .nav-btn { flex: 1; padding: 12px; border-radius: 10px; text-decoration: none; text-align: center; font-size: 13px; font-weight: 500; transition: all 0.3s; }
        .nav-btn.prev { background: rgba(255,255,255,0.05); color: rgba(255,255,255,0.7); border: 1px solid rgba(255,255,255,0.1); }
        .nav-btn.next { background: linear-gradient(135deg, #a855f7, #7c3aed); color: #fff; }
        .nav-btn:hover { transform: translateY(-2px); }
    </style>
</head>
<body>
    <div id="info">âœ¨ Ù‚Ø§Ù„Ø¨ Ûµ: Ø³ÛŒØ³ØªÙ… Ù¾Ø§Ø±ØªÛŒÚ©Ù„ - Ú©Ù‡Ú©Ø´Ø§Ù†</div>
    
    <button class="tutorial-toggle" onclick="toggleTutorial()">ğŸ“š Ø¯Ø±Ø³Ù†Ø§Ù…Ù‡</button>
    
    <div class="tutorial-panel" id="tutorialPanel">
        <div class="tutorial-section">
            <h3>ğŸ“– Ù…Ù‚Ø¯Ù…Ù‡</h3>
            <p>Ø³ÛŒØ³ØªÙ… Ù¾Ø§Ø±ØªÛŒÚ©Ù„ Ø¨Ø±Ø§ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ù‡Ø²Ø§Ø±Ø§Ù† Ø°Ø±Ù‡ Ú©ÙˆÚ†Ú© Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ø¨Ø±ÙØŒ Ø¨Ø§Ø±Ø§Ù†ØŒ Ø³ØªØ§Ø±Ù‡ØŒ Ø¯ÙˆØ¯ Ùˆ Ø¢ØªØ´ Ù‡Ù…Ù‡ Ø¨Ø§ Ù¾Ø§Ø±ØªÛŒÚ©Ù„ Ø³Ø§Ø®ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.</p>
        </div>

        <div class="tutorial-section">
            <h3>ğŸŒŸ Points</h3>
            <p>Ø¨Ù‡ Ø¬Ø§ÛŒ Mesh Ø§Ø² Points Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…:</p>
            <div class="code-block">
                <code><span class="keyword">const</span> geometry = <span class="keyword">new</span> THREE.<span class="function">BufferGeometry</span>();
<span class="keyword">const</span> material = <span class="keyword">new</span> THREE.<span class="function">PointsMaterial</span>();
<span class="keyword">const</span> points = <span class="keyword">new</span> THREE.<span class="function">Points</span>(geometry, material);</code>
            </div>
        </div>

        <div class="tutorial-section">
            <h3>ğŸ“Š BufferGeometry</h3>
            <div class="code-block">
                <code><span class="keyword">const</span> count = <span class="number">10000</span>;
<span class="keyword">const</span> positions = <span class="keyword">new</span> <span class="function">Float32Array</span>(count * <span class="number">3</span>);

<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i < count * <span class="number">3</span>; i++) {
    positions[i] = (Math.<span class="function">random</span>() - <span class="number">0.5</span>) * <span class="number">10</span>;
}

geometry.<span class="function">setAttribute</span>(
    <span class="string">'position'</span>,
    <span class="keyword">new</span> THREE.<span class="function">BufferAttribute</span>(positions, <span class="number">3</span>)
);</code>
            </div>
        </div>

        <div class="tutorial-section">
            <h3>ğŸ¨ Ø±Ù†Ú¯â€ŒØ¨Ù†Ø¯ÛŒ Ø°Ø±Ø§Øª</h3>
            <div class="code-block">
                <code><span class="keyword">const</span> colors = <span class="keyword">new</span> <span class="function">Float32Array</span>(count * <span class="number">3</span>);

<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i < count; i++) {
    <span class="keyword">const</span> i3 = i * <span class="number">3</span>;
    colors[i3] = Math.<span class="function">random</span>();     <span class="comment">// R</span>
    colors[i3 + <span class="number">1</span>] = Math.<span class="function">random</span>(); <span class="comment">// G</span>
    colors[i3 + <span class="number">2</span>] = Math.<span class="function">random</span>(); <span class="comment">// B</span>
}

geometry.<span class="function">setAttribute</span>(
    <span class="string">'color'</span>,
    <span class="keyword">new</span> THREE.<span class="function">BufferAttribute</span>(colors, <span class="number">3</span>)
);</code>
            </div>
        </div>

        <div class="tutorial-section">
            <h3>âš™ï¸ PointsMaterial</h3>
            <div class="code-block">
                <code><span class="keyword">const</span> material = <span class="keyword">new</span> THREE.<span class="function">PointsMaterial</span>({
    size: <span class="number">0.02</span>,
    sizeAttenuation: <span class="keyword">true</span>,  <span class="comment">// Ú©ÙˆÚ†Ú© Ø´Ø¯Ù† Ø¨Ø§ ÙØ§ØµÙ„Ù‡</span>
    depthWrite: <span class="keyword">false</span>,
    blending: THREE.AdditiveBlending,
    vertexColors: <span class="keyword">true</span>       <span class="comment">// Ø±Ù†Ú¯ Ø§Ø² geometry</span>
});</code>
            </div>
        </div>

        <div class="tutorial-section">
            <h3>ğŸŒ€ Ø§Ù„Ú¯ÙˆÛŒ Ú©Ù‡Ú©Ø´Ø§Ù†</h3>
            <div class="code-block">
                <code><span class="keyword">const</span> branches = <span class="number">5</span>;
<span class="keyword">const</span> spin = <span class="number">1</span>;

<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i < count; i++) {
    <span class="keyword">const</span> radius = Math.<span class="function">random</span>() * <span class="number">5</span>;
    <span class="keyword">const</span> spinAngle = radius * spin;
    <span class="keyword">const</span> branchAngle = (i % branches) / branches 
                        * Math.PI * <span class="number">2</span>;
    
    x = Math.<span class="function">cos</span>(branchAngle + spinAngle) * radius;
    z = Math.<span class="function">sin</span>(branchAngle + spinAngle) * radius;
}</code>
            </div>
        </div>

        <div class="tutorial-section">
            <h3>ğŸ’¡ Ù†Ú©ØªÙ‡</h3>
            <div class="tip-box">
                <p>ğŸ“ AdditiveBlending Ø¨Ø§Ø¹Ø« Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ø°Ø±Ø§ØªÛŒ Ú©Ù‡ Ø±ÙˆÛŒ Ù‡Ù… Ù‚Ø±Ø§Ø± Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ù†Ø¯ Ø±ÙˆØ´Ù†â€ŒØªØ± Ø´ÙˆÙ†Ø¯. Ø§ÛŒÙ† Ø§ÙÚ©Øª Ø¨Ø±Ø§ÛŒ Ø³ØªØ§Ø±Ù‡ Ùˆ Ø¢ØªØ´ Ø¹Ø§Ù„ÛŒ Ø§Ø³Øª!</p>
            </div>
        </div>

        <div class="nav-buttons">
            <a href="template4.html" class="nav-btn prev">â†’ Ø¯Ø±Ø³ Ù‚Ø¨Ù„ÛŒ</a>
            <a href="template6.html" class="nav-btn next">Ø¯Ø±Ø³ Ø¨Ø¹Ø¯ÛŒ â†</a>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script>
        function toggleTutorial() { document.getElementById('tutorialPanel').classList.toggle('open'); }

        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x000011);
        
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 3, 8);
        
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        document.body.appendChild(renderer.domElement);
        
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.autoRotate = true;
        controls.autoRotateSpeed = 0.5;
        
        const parameters = { count: 10000, size: 0.02, radius: 5, branches: 5, spin: 1, randomness: 0.2, randomnessPower: 3, insideColor: '#ff6030', outsideColor: '#1b3984' };
        
        let geometry = null, material = null, points = null;
        
        function generateGalaxy() {
            if (points !== null) { geometry.dispose(); material.dispose(); scene.remove(points); }
            
            geometry = new THREE.BufferGeometry();
            const positions = new Float32Array(parameters.count * 3);
            const colors = new Float32Array(parameters.count * 3);
            const colorInside = new THREE.Color(parameters.insideColor);
            const colorOutside = new THREE.Color(parameters.outsideColor);
            
            for (let i = 0; i < parameters.count; i++) {
                const i3 = i * 3;
                const radius = Math.random() * parameters.radius;
                const spinAngle = radius * parameters.spin;
                const branchAngle = (i % parameters.branches) / parameters.branches * Math.PI * 2;
                
                const randomX = Math.pow(Math.random(), parameters.randomnessPower) * (Math.random() < 0.5 ? 1 : -1) * parameters.randomness * radius;
                const randomY = Math.pow(Math.random(), parameters.randomnessPower) * (Math.random() < 0.5 ? 1 : -1) * parameters.randomness * radius;
                const randomZ = Math.pow(Math.random(), parameters.randomnessPower) * (Math.random() < 0.5 ? 1 : -1) * parameters.randomness * radius;
                
                positions[i3] = Math.cos(branchAngle + spinAngle) * radius + randomX;
                positions[i3 + 1] = randomY;
                positions[i3 + 2] = Math.sin(branchAngle + spinAngle) * radius + randomZ;
                
                const mixedColor = colorInside.clone();
                mixedColor.lerp(colorOutside, radius / parameters.radius);
                colors[i3] = mixedColor.r; colors[i3 + 1] = mixedColor.g; colors[i3 + 2] = mixedColor.b;
            }
            
            geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
            
            material = new THREE.PointsMaterial({ size: parameters.size, sizeAttenuation: true, depthWrite: false, blending: THREE.AdditiveBlending, vertexColors: true });
            points = new THREE.Points(geometry, material);
            scene.add(points);
        }
        generateGalaxy();
        
        const starsGeometry = new THREE.BufferGeometry();
        const starsPositions = new Float32Array(2000 * 3);
        for (let i = 0; i < 2000 * 3; i++) { starsPositions[i] = (Math.random() - 0.5) * 100; }
        starsGeometry.setAttribute('position', new THREE.BufferAttribute(starsPositions, 3));
        const stars = new THREE.Points(starsGeometry, new THREE.PointsMaterial({ size: 0.05, color: 0xffffff, transparent: true, opacity: 0.8 }));
        scene.add(stars);
        
        function animate() {
            requestAnimationFrame(animate);
            if (points) points.rotation.y += 0.001;
            controls.update();
            renderer.render(scene, camera);
        }
        
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
        
        animate();
    </script>
</body>
</html>
